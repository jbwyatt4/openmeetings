<?xml version="1.0" encoding="UTF-8" ?>
<library>   
    
<class name="videoboard" extends="guipresenter" x="2" y="2"
    width="290" height="280" closable="false" title="Video and Audio"
    resizeable="false">
    <videocontainer name="_videocontainer" x="1" y="22" />
</class>   
    
<class name="whiteboardpanel" extends="guipresenter" x="296" y="2"
    width="660" height="592" closable="false" title="Whiteboard"
    resizeable="false">
   <whiteboard name="_whiteboard" y="22" x="4">
        <handler name="onsharedMessage" args="obj"> 
            //Debug.write("send: ",obj);
            canvas.objWhiteboard = obj;
            hib.sendVars.doCall();
        </handler>   
	
		<handler name="isloadingImage" args="val" >
			Debug.write("isloadingImage: ",val);
		</handler>
		<handler name="isloadedImage" args="val" >        
			Debug.write("isloadedImage: ",val);
		</handler>
   </whiteboard>
	<view name="currentmainobjectisMod" visible="${ !canvas.ismoderator }"
		x="0" y="22" height="$once{ parent.height-22 }" width="$once{ parent.width }" >
		<handler name="onclick">
			new errormoderatorpopup(canvas,{error:canvas.getLabelName(97)});
		</handler>
	</view>	    
</class>  
    
<class name="modpanel" extends="guipresenter" x="2" y="284"
    width="266" height="46" closable="false" labelid="316"
    resizeable="false">	
	<moderationpanel y="22" />
</class>  
    
    
<class name="filespanel" extends="guipresenter" x="2" y="284"
    width="290" height="310" closable="false" title="Chat Files User"
    resizeable="false">
    <conferencecontainertab x="1" y="22" name="_menubar" />
</class>        
    
    
<class name="conference" extends="basecontentview" destroyByMethod="true" >
    
    <handler name="oninit">
        canvas._mainbgcontentNavi.setAttribute('height',0);
        canvas.setAttribute('naviHeightDelta',28);
        new conferencemenubar(canvas._conferencemenu);
        new moderationpanel(canvas._conferencemenu,{x:400});
        canvas._conferencemenu.setAttribute('visibility','visible');
        
        new videoboard(this);
        new filespanel(this);
        
        new whiteboardpanel(this);
    </handler>

	<handler name="ontabcontentleave">
        Debug.write("ontabcontentleave:",this);
        canvas._videocontainer._video1.resetValues();
        canvas._videocontainer._video2.resetValues();
        canvas._videocontainer._video3.resetValues();
        canvas._videocontainer._video4.resetValues();
        canvas._videocontainer = null;
        canvas._chartcontent = null;
        canvas._mymod = null;
        if (_drawarea.letterObjectIsActive){
        	_drawarea.currentletterObj.destroy();
        }        
		this.logicalRoomLeave.doCall();
        Debug.write("this.logicalRoomLeave ",this.logicalRoomLeave);
	</handler>
	    
	<netremotecallhib name="logicalRoomLeave" funcname="logicalRoomLeave" remotecontext="$once{ canvas.thishib }" >      
    	<handler name="ondata" args="value">
    		Debug.write("logicalRoomLeave: ",value);
    		//this.parent.destroy();
            canvas.thishib.reconnectAfterRoomleft = true;
            canvas.thishib.reconnectedRoomInstance = this.parent;
            canvas.thishib.disconnect();
            canvas._mainbgcontentNavi.setAttribute('height',canvas.naviHeight);
            canvas.setAttribute('naviHeightDelta',canvas.naviHeight);
            canvas._conferencemenu.removeAll();
            canvas._conferencemenu.setAttribute('visibility','hidden');
    	</handler>
    </netremotecallhib>
</class>

</library>