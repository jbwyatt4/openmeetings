<?xml version="1.0" encoding="UTF-8" ?>
<library>


<class name="chattabitem" extends="view" 
	   width="$once{ parent.width }" >

	<attribute name="user_id" value="0" type="number" />
	<attribute name="username" value="" type="string" />
	<attribute name="usercolor" value="0" type="string" />
	<attribute name="cbtext" value="" type="string" />
	
	<handler name="oninit">
		<![CDATA[
	        var downloadurl = 'http://'+canvas.rtmphostlocal+':'+canvas.red5httpport
	        		+'/xmlcrm/DownloadHandler?fileName=CHAT'
	        		+'&moduleName=chat&parentPath=&room=&domain='
	        		+'&remoteUserid='+this.user_id
	        		+'&sid='+canvas.sessionId;
	        Debug.write("downloadurl "+downloadurl);
	        this._userpic.setAttribute('src',downloadurl);	
        ]]>
	</handler>
	
	<image name="_userpic" />
	
	<text multiline="true" text="$once{ parent.username }" x="40"
		  width="$once{ parent.width - 40 }" bgcolor="$once{ parent.usercolor }"
		  selectable="true" />
		  
	<text multiline="true" text="$once{ parent.cbtext }" x="40" y="20"
		  width="$once{ parent.width - 40 }" selectable="true" />

</class>

</library>